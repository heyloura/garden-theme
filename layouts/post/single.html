{{ define "main" }}
<main class="h-entry">

  {{ if templates.Exists "partials/microhook-before-post.html" }}
  {{ partial "microhook-before-post.html" . }}
  {{ end }}

  <header class="post-header">
    {{ if .Title }}
    <h2 class="p-name post-title">{{ .Title }}</h2>
    {{ end }}
    {{ if templates.Exists "partials/microhook-post-byline.html" }}
    {{ partial "microhook-post-byline.html" . }}
    {{ else }}
    {{ with .Params.audio }}
      <script type="text/javascript" src="https://micro.blog/narration.js?url={{ . }}"></script>
    {{ end }}
    {{ end }}
  </header>

  <article class="post-content e-content">
    {{ .Content }}
  </article>

  <footer><p style="text-align:center;">
    {{- if .Page.Params.Lastmod }}
    Most recent update on
    <time class="dt-updated" datetime="{{ .Page.Params.Lastmod.Format "2006-01-02 15:04:05 -0700" }}">
      {{ .Page.Params.Lastmod.Format "2006.01.02" }}
    </time><br/>
    {{- end}}
    <a href="{{ .Permalink }}" class="u-url">First published on <time class="dt-published" datetime="{{ .Date.Format "2006-01-02 15:04:05 -0700" }}">{{ .Date.Format "Jan 2, 2006" }}</time></a>
    </p>
  </footer>
</main>

  {{ if templates.Exists "partials/microhook-categories.html" }}
  {{ partial "microhook-categories.html" . }}
  {{ else }}
  {{ if .Params.categories }}
  <aside class="backlinks">
    <ol class="toc-list h-feed" role="list">
      <li>
        <span class="noA"><span class="title">Categories and tags<span class="leaders" aria-hidden="true"></span></span></span><span class="page"></span>
          <ol role="list">
            {{ range .Params.categories }} {{ $href := print (absURL "categories/") (urlize .) }}
            <li>
              <a class="p-url" href="{{ $href }}">
                <span class="p-name title">{{ . }}<span class="leaders" aria-hidden="true"></span></span>
                <span class="page">
                </span>
              </a>
            </li>
            {{end}}
          </ol>
      </li>
    </ol>
  </aside>
  {{ end }}
  {{ end }}

  {{ if templates.Exists "partials/microhook-after-post.html" }}
  {{ partial "microhook-after-post.html" . }}
  {{ end }}



<aside>
  {{ $permalinkurl := urls.Parse .Permalink }}
  {{ $relpermalink := .RelPermalink }}
  {{ $pages := slice }}
  {{- range .Site.Pages -}}
      {{- if strings.Contains .Content $relpermalink -}}
          {{ $pages = $pages | append . }}
      {{- end -}}
  {{- end -}}
  {{ with $pages }}
  <section class="backlinks">
    <ol class="toc-list h-feed" role="list">
      <li>
        <span class="noA"><span class="title">Backlinks<span class="leaders" aria-hidden="true"></span></span></span><span class="page"></span>
          <ol role="list">
            {{ range $pages }}
              {{ if .Title }}
              <li>
                <a class="p-url" href="{{ .Permalink }}">
                  <span class="p-name title">{{ .Title }}<span class="leaders" aria-hidden="true"></span></span>
                  <span class="page">
                    {{- if .Page.Params.Lastmod }}
                    <time class="dt-updated" datetime="{{ .Page.Params.Lastmod.Format "2006-01-02 15:04:05 -0700" }}">
                      {{ .Page.Params.Lastmod.Format "2006.01.02" }}
                    </time>
                    {{- end}}
                  </span>
                </a>
              </li>
              {{- else}}
              <li>
                <a class="p-url" href="{{ .Permalink }}">
                  <span class="p-name title">{{ .Summary | truncate 150 }}<span class="leaders" aria-hidden="true"></span></span>
                  <span class="page">
                    {{- if .Page.Params.Lastmod }}
                    <time class="dt-updated" datetime="{{ .Page.Params.Lastmod.Format "2006-01-02 15:04:05 -0700" }}">
                      {{ .Page.Params.Lastmod.Format "2006.01.02" }}
                    </time>
                    {{- end}}
                  </span>
                </a>
              </li>
              {{- end}}
            {{end}}
          </ol>
      </li>
    </ol>
  </section>
  {{ end }}
</aside>

{{ if templates.Exists "partials/microhook-before-comments.html" }}
{{ partial "microhook-before-comments.html" . }}
{{ end }}

<section>
  <h3 class="post-title">Conversation</h3>
  {{ if .Site.Params.include_conversation }}
  <script type="text/javascript" src="https://micro.blog/conversation.js?url={{ .Permalink }}"></script>
  {{ end }}
	<div class="microblog_conversation">	<div class="microblog_post">		<div class="microblog_user">			<img class="microblog_avatar" src="https://avatars.micro.blog/avatars/2023/15/3241.jpg" width="20" height="20" style="max-width: 20px;">			<span class="microblog_fullname">Ricardo Mendes </span>		</div>		<div class="microblog_text">			<p> Hey.. This is really cool.. I will share this with a bunch of Gem friends that I know were looking for a way to do similar with their own blogs, again thanks, great dev cooking! </p>		</div>		<div class="microblog_time">			<a href="https://micro.blog/rmdes/59573234">2025-03-11  5:27 pm</a>		</div>	</div>	<div class="microblog_post">		<div class="microblog_user">			<img class="microblog_avatar" src="https://avatars.micro.blog/avatars/2024/17/38001.jpg" width="20" height="20" style="max-width: 20px;">			<span class="microblog_fullname">Sven Dahlstrand</span>		</div>		<div class="microblog_text">			<p> Will read this with my morning coffee tomorrow, but browsing your capsule right now. Amazing! üòç</p>		</div>		<div class="microblog_time">			<a href="https://micro.blog/sod/59583618">2025-03-11  8:22 pm</a>		</div>	</div>	<div class="microblog_post">		<div class="microblog_user">			<img class="microblog_avatar" src="https://avatars.micro.blog/avatars/2022/144491.jpg" width="20" height="20" style="max-width: 20px;">			<span class="microblog_fullname">Loura</span>		</div>		<div class="microblog_text">			<p><a href="https://micro.blog/rmdes">@rmdes</a> Thank you!</p>		</div>		<div class="microblog_time">			<a href="https://micro.blog/heyloura/59585068">2025-03-11  8:51 pm</a>		</div>	</div>	<div class="microblog_post">		<div class="microblog_user">			<img class="microblog_avatar" src="https://avatars.micro.blog/avatars/2022/144491.jpg" width="20" height="20" style="max-width: 20px;">			<span class="microblog_fullname">Loura</span>		</div>		<div class="microblog_text">			<p><a href="https://micro.blog/sod">@sod</a> Thanks for checking it out! It was an enjoyable project to toss together last week üòÅ</p>		</div>		<div class="microblog_time">			<a href="https://micro.blog/heyloura/59884897">2025-03-15  2:55 pm</a>		</div>	</div><form method="POST" class="microblog_reply_form" action="https://micro.blog/account/comments/59568308/post"><p class="microblog_reply_signin">Sign in with <a href="https://micro.blog/account/comments/59568308/mb?url=https://heyloura.com/2025/03/11/coding-adventure-using-deno-and.html">Micro.blog</a>, <a href="https://micro.blog/account/comments/59568308/mastodon?url=https://heyloura.com/2025/03/11/coding-adventure-using-deno-and.html">Mastodon</a>, or <a href="https://micro.blog/account/comments/59568308/bluesky?url=https://heyloura.com/2025/03/11/coding-adventure-using-deno-and.html">Bluesky</a> to reply:</p><input type="hidden" name="token" value="null"><input type="hidden" name="username" value="null"><input type="hidden" name="url" value="https://heyloura.com/2025/03/11/coding-adventure-using-deno-and.html"><p class="microblog_reply_textarea"><textarea name="text" rows="4" cols="50" disabled=""></textarea></p><p class="microblog_reply_button"><input type="submit" value="Post" disabled=""></p></form></div>
</section>

{{ if or (templates.Exists "partials/reply-by-email.html") (templates.Exists "partials/conversation-link.html") (templates.Exists "partials/plugin_tinylytics.html") (templates.Exists "partials/reply-on-mastodon.html") (templates.Exists "partials/microhook-share-button.html")}}
<ul class="reply-buttons">
  {{ if templates.Exists "partials/plugin_tinylytics.html" }}
  <li><button class="tinylytics_kudos">Kudos</button></li>
  {{ end }}
  {{ if templates.Exists "partials/reply-by-email.html" }}
  <li>{{ partial "reply-by-email.html" . }}</li>
  {{ end }}
  {{ if templates.Exists "partials/conversation-link.html" }}
  <li>{{ partial "conversation-link.html" . }}</li>
  {{ end }}
  {{ if templates.Exists "partials/reply-on-mastodon.html" }}
  <li>{{ partial "reply-on-mastodon.html" . }}</li>
  {{ end }}
  {{ if templates.Exists "partials/microhook-share-button.html" }}
  {{ partial "microhook-share-button.html" . }}
  {{ end }}
  <li>
    <a {{ printf "href=%q" (replace .Permalink "https://" "gemini://") | safeHtmlAttr }}>üöÄ Also on Gemini</a>
  </li>
</ul>
{{ end }}

{{ if templates.Exists "partials/microhook-after-comments.html" }}
{{ partial "microhook-after-comments.html" . }}
{{ end }}

{{ end }}